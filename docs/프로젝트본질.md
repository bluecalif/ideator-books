# ideator-books 프로젝트 본질

> **한 줄 요약**: 도서 요약을 4개 분야 전문가 KB에 정합하여, 고유한 비평과 1페이지 제안서(콘텐츠/사업)를 생성하는 시스템

---

## 1. 핵심 철학

| 원칙 | 내용 |
|------|------|
| **외부 프레임 금지** | KB의 통합지식·인사이트만 사용. SWOT, 5 Forces 등 외부 분석틀 배제 |
| **Outline is earned** | 결과 형식은 입력 지식의 성격이 결정. 템플릿 강제 금지 |
| **완전한 투명성** | 모든 문장에 anchored_by (KB ID) 표기 필수 |
| **책 중심 분석** | 출발지식(책)의 구체적 내용이 분석의 중심 |

---

## 2. 목표 KPI

| KPI | 목표 | 측정 기준 |
|-----|------|----------|
| **고유 문장** | 3개, 95% 충족률 | "이 책 아니면 안 나오는 문장" |
| **anchored_by** | 100% | 모든 문장이 KB 앵커 포함 |
| **승인 라운드** | ≤ 3회 | 앵커·형식·최종안 승인 |
| **재사용률** | ≥ 80% | 동일 프레임워크로 다른 책 적용 |
| **가짜 앵커** | 0개 | KB에 없는 앵커 생성 금지 |

---

## 3. 입력 / 출력 / 제약

### 입력
- **필수**: 도서 요약 + 메타정보 (제목/저자/연도/주제)
- **필수**: 4개 분야 전문가 KB (통합지식·인사이트, ID 부여)
- **선택**: 사용자 목표(콘텐츠/사업), 형식 선호, 분량

### 출력
1. **출발 지식** - 책 정보 및 요약
2. **형식 분기** - 사례추적형/논쟁형/도구형 중 1종 (선정 사유 포함)
3. **도메인 리뷰 카드** - 4개 분야별 장점·문제·조건 (모두 anchored_by)
4. **통합 기록** - 긴장축 2-3개, 결론 1줄
5. **최종 1p 제안서** - 콘텐츠판 또는 사업판 (7요소)

### 제약 (가드레일)
| 규칙 | 내용 |
|------|------|
| ❌ 외부 프레임 금지 | KB에 없으면 "KB 부재"로 보류 |
| ✅ anchored_by 의무 | 모든 문장에 [KB ID] 표기 |
| ❌ 병렬 나열 금지 | 긴장축(합치/상충/누락/경계) 중심 전개 |
| ✅ 고유 문장 3개 | 없으면 출고 불가 |
| ✅ 책 내용 중심 | 앵커는 평가 기준일 뿐, 책이 주인공 |

---

## 4. 형식 분기 규칙

| 형식 | 선택 조건 | 결과물 특징 |
|------|----------|-----------|
| **사례추적형** | 사건·경로·역사적 사례가 핵심 | 사건 시퀀스 중심 전개 |
| **논쟁형** | 책 주장과 KB가 강하게 상충 | 교차 비평 → 중재안 |
| **도구형** | 원칙·방법·실행이 핵심 | 플레이북/체크리스트 |

---

## 5. 프로세스 (6단계)

```
1. Intake/정렬
   ↓ 책 요약의 핵심을 4개 분야별 상위 앵커 1개에 매핑
   ↓ 합치/상충/누락/경계 분석

2. 분야 비평 (병렬)
   ↓ 4개 도메인 × (장점·문제·조건)
   ↓ 모든 문장에 anchored_by
   ↓ 책의 구체적 내용 필수 명시

3. 통합
   ↓ 긴장축 2-3개 추출 (병렬 나열 금지)
   ↓ 형식 분기 결정

4. 아이디어 생성
   ↓ 2-3개 아이디어
   ↓ 책의 고유 요소 × KB 앵커 조합

5. 정련
   ↓ KB의 전제/반례/민감 관계로 보강
   ↓ 외부 지표 불가

6. 산출
   ↓ 출발지식 → 리뷰 카드 → 통합 기록 → 1p 제안서
```

---

## 6. 멀티에이전트 구조 (LangGraph)

### 노드
- **AnchorMapper**: 도서 → 4개 도메인 앵커 매핑
- **Reviewers (4개)**: 병렬 실행, 도메인별 장점·문제·조건
- **Integrator**: 긴장축 추출, 형식 분기
- **Producer**: 1p 생성 (출발지식 포함)
- **Validator**: 가드레일 검증

### State
- 입력: book_ids, summary, title, author, topic
- 중간: anchors, reviews, tension_axes
- 출력: onepager_md, validation_passed

### 체크포인트
- MemorySaver로 진행 상태 저장
- 실패 시 재개 가능 (thread_id 기반)

---

## 7. 역할 분담

### 사용자
- ✅ 출발 지식 제공 (요약 + 메타)
- ✅ 형식 분기 승인
- ✅ 앵커 선택 확인
- ✅ 최종안 승인 (콘텐츠/사업)

### AI (GPT)
- ✅ 앵커 매핑 후보 생성
- ✅ 분야 비평 (앵커 문장)
- ✅ 긴장축 통합, 형식 분기 제안
- ✅ 아이디어 생성·정련
- ✅ 1p 제안서 작성
- ✅ 가드레일 점검

---

## 8. 리스크 대응

| 리스크 | 대응 |
|--------|------|
| KB 부재 개념 섞임 | 자동 검사 "KB 부재 태그"로 차단 |
| 템플릿 균질화 | 고유 문장 3개 의무 + 형식 분기 규칙 |
| 앵커 과적재 | 분야별 상위 앵커 1개 원칙 |
| 가짜 앵커 생성 | available_anchors 검증, Validator 차단 |
| 책 내용 무시 | User message에 "책 내용 중심" 명시 |

---

## 9. 핵심 용어

| 용어 | 정의 |
|------|------|
| **KB** | 4개 분야(인문·사회·경제·과학) 전문가 지식베이스 |
| **통합지식** | 분야별 상위 개념 (예: `경제경영·경영/사업 통합지식`) |
| **앵커** | 문장이 의존하는 KB 항목 ID |
| **긴장축** | 합치/상충/누락/경계 4분류로 핵심 논점 요약 |
| **형식 분기** | 사례추적/논쟁/도구형 중 결정 |
| **출발지식** | 분석 대상 책의 정보 및 내용 |
| **고유 문장** | "이 책 아니면 안 나오는 문장" 3개 필수 |

---

**이 문서로 새 세션을 시작하면, 프로젝트 맥락을 즉시 파악하고 작업을 이어갈 수 있습니다.**
